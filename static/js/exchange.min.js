var kolocal=angular.module("kolocal",["LocalStorageModule"]);kolocal.directive("iframeOnload",function(){return{scope:{callBack:"&iframeOnload"},link:function(a,b){b.on("load",function(){return a.callBack()})}}}),kolocal.controller("ExchangeCtrl",["$scope","$window","$location","$http","$q","$document",function(a,b,c,d){"use strict";var e=document.getElementById("client"),f="http://www.kocrm.com";a.bodyHeight=818,a.iframeLoadedCallBack=function(){var a;a=JSON.stringify({check:!1}),e.contentWindow.postMessage(a,f)};var g=function(b){a.bodyHeight=b,a.$apply()},h=function(a){d.post("/info/save",a)},i=function(a){d.post("/company/saveplus",a)},j=function(a){for(var b=0;b<a.length;b++)""===a[b].ptreat_id&&delete a[b].ptreat_id;d.post("/pcateg/save",a)},k=function(a){for(var b=0;b<a.length;b++)""===a[b].categ_id&&delete a[b].categ_id;d.post("/product/save",a)},l=function(a){d.post("/ptreat/save",a)},m=function(a){d.post("/pay/save",a)},n=function(a){d.post("/tcateg/save",a)},o=function(a){for(var b=0;b<a.length;b++)""===a[b].categ_id&&delete a[b].categ_id;d.post("/table/save",a)},p=function(){d.post("/cashier/open",{})},q=function(a){d.post("/order/print/first",a)},r=function(a){for(var b=0;b<a.lines.length;b++)""===a.lines[b].line_id&&delete a.lines[b].line_id,""===a.lines[b].id&&delete a.lines[b].id,""===a.lines[b].order_id&&delete a.lines[b].order_id,""===a.lines[b].table_id&&delete a.lines[b].table_id;for(var c=0;b<a.pays.length;c++)""===a.pays[c].id&&delete a.pays[c].id,""===a.pays[c].create_id&&delete a.pays[c].create_id;""===a.id&&delete a.id,""===a.preorder_id&&delete a.preorder_id,""===a.table_id&&delete a.table_id,""===a.pos_id&&delete a.pos_id,d.post("/order/print/table",a)},s=function(a){d.post("/order/print/line/done",a)},t=function(a){for(var b=0;b<a.lines.length;b++)""===a.lines[b].line_id&&delete a.lines[b].line_id,""===a.lines[b].id&&delete a.lines[b].id,""===a.lines[b].order_id&&delete a.lines[b].order_id,""===a.lines[b].table_id&&delete a.lines[b].table_id;for(var c=0;b<a.pays.length;c++)""===a.pays[c].id&&delete a.pays[c].id,""===a.pays[c].create_id&&delete a.pays[c].create_id;""===a.id&&delete a.id,""===a.preorder_id&&delete a.preorder_id,""===a.table_id&&delete a.table_id,""===a.pos_id&&delete a.pos_id,d.post("/order/print/return_order",a)},u=function(a){d.post("/order/print/return_one",a)},v=function(a){for(var b=0;b<a.length;b++){for(var c=0;c<a[b].lines.length;c++)""===a[b].lines[c].line_id&&delete a[b].lines[c].line_id,""===a[b].lines[c].id&&delete a[b].lines[c].id,""===a[b].lines[c].order_id&&delete a[b].lines[c].order_id,""===a[b].lines[c].table_id&&delete a[b].lines[c].table_id;for(var e=0;c<a[e].pays.length;e++)""===a[b].pays[e].id&&delete a[b].pays[e].id,""===a[b].pays[e].create_id&&delete a[b].pays[e].create_id;""===a[b].id&&delete a[b].id,""===a[b].preorder_id&&delete a[b].preorder_id,""===a[b].table_id&&delete a[b].table_id,""===a[b].pos_id&&delete a[b].pos_id}d.post("/order/print/receipt",a)};b.addEventListener("message",function(a){var b=a.origin;if(b==f&&a.data){var c=JSON.parse(a.data);c.info?h(c.info):c.plus?i(c.plus):c.height?g(c.height):c.pcateg?j(c.pcateg):c.product?k(c.product):c.ptreat?l(c.ptreat):c.pays?m(c.pays):c.tcateg?n(c.tcateg):c.table?o(c.table):c.order?q(c.order):c.reprint?r(c.reprint):c.return_order?t(c.return_order):c.return_one?u(c.return_one):c.cashbox?p():c.done?s(c.done):c.receipt?v(c.receipt):console.log(c)}})}]);
//# sourceMappingURL=exchange.min.js.map